@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }

  /* Mejoras para texto que desborda */
  .overflow-wrap-anywhere {
    overflow-wrap: anywhere;
  }
}

@layer utilities {
  /* Grids responsivos */
  .responsive-grid {
    @apply grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3;
  }

  /* Scrollbar personalizada para mejor estética */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 8px; /* Aumentamos altura para mejor usabilidad en móviles */
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-background/50 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-primary/20 rounded-full hover:bg-primary/30 transition-colors;
  }

  /* Soporte para scroll horizontal en contenedores */
  .horizontal-scroll {
    @apply overflow-x-auto whitespace-nowrap pb-2;
    scrollbar-width: thin;
    -webkit-overflow-scrolling: touch; /* Mejor desplazamiento en iOS */
  }
  
  /* Contenedor flexible para dispositivos pequeños */
  .flex-responsive {
    @apply flex flex-col sm:flex-row;
  }

  /* Breakpoint personalizado para dispositivos muy pequeños */
  @media (min-width: 480px) {
    .xs\:grid-cols-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  
  /* Clases para niveles de anidamiento de comentarios */
  .nested-reply-level-1 { 
    @apply border-l-2 border-primary/70 relative pl-3; 
  }
  .nested-reply-level-1::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-primary/30;
    left: -4px;
  }
  
  .nested-reply-level-2 { 
    @apply border-l-2 border-success/70 relative pl-3; 
  }
  .nested-reply-level-2::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-success/30;
    left: -4px;
  }
  
  .nested-reply-level-3 { 
    @apply border-l-2 border-blue-400/70 relative pl-3; 
  }
  .nested-reply-level-3::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-blue-400/30;
    left: -4px;
  }
  
  .nested-reply-level-4 { 
    @apply border-l-2 border-purple-400/70 relative pl-3; 
  }
  .nested-reply-level-4::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-purple-400/30;
    left: -4px;
  }
  
  .nested-reply-level-5 { 
    @apply border-l-2 border-amber-400/70 relative pl-3; 
  }
  .nested-reply-level-5::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-amber-400/30;
    left: -4px;
  }
  
  .nested-reply-level-6 { 
    @apply border-l-2 border-indigo-400/70 relative pl-3; 
  }
  .nested-reply-level-6::before {
    content: "";
    @apply absolute top-0 bottom-0 left-0 w-1 bg-indigo-400/30;
    left: -4px;
  }
  
  /* Contenedor desplazable para respuestas anidadas */
  .replies-container {
    @apply max-w-full overflow-x-auto overflow-y-visible pb-2;
    -webkit-overflow-scrolling: touch;
    mask-image: linear-gradient(to right, transparent, black 5px, black 95%, transparent);
  }
  
  /* Estilos para el modal de respuestas profundamente anidadas */
  .reply-modal-content {
    @apply max-h-[80vh] overflow-y-auto;
  }
  
  /* Estilos para el árbol de conversación */
  .conversation-tree {
    @apply pb-4;
  }
  
  .branch-node {
    @apply transition-all duration-200;
  }
  
  .branch-node::before {
    content: "";
    @apply absolute left-[-16px] top-0 w-[2px] h-full bg-primary/20;
    transition: background-color 0.3s ease;
  }
  
  .branch-node:last-child::before {
    @apply h-4;
  }
  
  /* Colores para diferentes ramas del árbol (máximo 5 colores) */
  .branch-node:nth-child(5n+1)::before {
    @apply bg-blue-400/30;
  }
  
  .branch-node:nth-child(5n+2)::before {
    @apply bg-green-400/30;
  }
  
  .branch-node:nth-child(5n+3)::before {
    @apply bg-purple-400/30;
  }
  
  .branch-node:nth-child(5n+4)::before {
    @apply bg-amber-400/30;
  }
  
  .branch-node:nth-child(5n+5)::before {
    @apply bg-rose-400/30;
  }
  
  /* Estilo para resaltar la ruta activa al hacer hover */
  .branch-node:hover::before {
    @apply bg-primary;
  }
  
  /* Efecto en la tarjeta al pasar el ratón */
  .branch-node:hover > div {
    @apply border-primary shadow-md;
    transform: translateX(2px);
  }
}